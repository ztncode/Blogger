function getUrlId(){let e=window.location.hostname.trim().toLowerCase();return e.startsWith("www.")?e.slice(4):e}function showNotification(e,t,o){let r=document.createElement("div");r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="rgba(0, 0, 0, 0.5)",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.zIndex="1100",r.innerHTML=`\n        <div style="background: white; padding: 20px; border-radius: 8px; text-align: center; max-width: 400px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">\n          <h2 style="margin-bottom: 10px; color:#000;">Announcement</h2>\n          <p style="color:#000;">${e}</p>\n          <p style="font-size: 2em; color:red;" id="countdown">${t}</p>\n        </div>\n    `,document.body.appendChild(r);let i=r.querySelector("#countdown"),n=t,l=setInterval((()=>{n--,i.textContent=n,n<=0&&(clearInterval(l),r.remove(),"function"==typeof o&&o())}),1e3)}const urlId=getUrlId(),apiUrl="https://script.google.com/macros/s/AKfycbxihcZZf2hTkJOl_FQ8fb2TzgRug31sjHQbKvsSP2BKsYTSyohS_BG6KnxD4fc9xuSM/exec",isBloggerPreview=window.location.pathname.includes("/b/blog-preview");isBloggerPreview||urlId&&fetch(apiUrl).then((e=>e.json())).then((e=>{console.log("Data dari API:",e);let t=e.redirectUrl||"https://www.ztncode.my.id/p/activate.html";if(!e||!Array.isArray(e.user))throw Error("Invalid domain or no user data.");e.user.some((e=>e.id===urlId&&!0===e.active))||showNotification("Your domain is inactive. You will be redirected in 5 seconds...",5,(()=>{window.location.href=t}))})).catch((e=>{console.error("Terjadi error saat fetch:",e),showNotification("An error occurred while processing the data. You will be redirected..",5,(()=>{window.location.href="https://www.ztncode.my.id/p/activate.html"}))}));
function generateChordCodes(e,t){if(!e||!t)return;const n={},r=new Set,o=e.replace(/([A-G](?:#|b)?(?:maj7|m7|maj|min|dim|aug|sus|m|7)?(?:\/[A-G](?:#|b)?)?)([|;:,() ]*)/g,((e,t,o)=>{r.add(t);const a=t.replace(/#/g,"k").replace(/\//g,"T");n[a]=(n[a]||0)+1;return`<a class="ztnchord ${`tol-${a}${n[a]}`}" data-chord="${t}">${t}${o}<span class="custom ztn-${a}"></span></a>`})),a=Array.from(r);let c="";const s=new Set;a.forEach((e=>{const t=e.replace(/#/g,"kr3s").replace(/\//g,"T");s.has(t)||(c+=createChordImage(e),s.add(t))})),t.innerHTML="";const d=document.createElement("pre");d.id="sizeable",d.innerHTML=o;const i=document.createElement("div");i.id="ztnchordimg",i.className="wadah",i.innerHTML=c+'<div style="clear:both;"></div>',t.appendChild(d),t.appendChild(i),generateChordCSS()}function createChordImage(e){const t=e.replace(/#/g,"kr3s").replace(/\//g,"T");return`<img class="pusing" loading="lazy" src="${`https://raw.githubusercontent.com/zidan52/ztnmusic/main/chord/${t}.png`}" onerror="this.onerror=null;this.src='${`https://raw.githubusercontent.com/zidan52/ztnmusic/main/chords/${t}.png`}';"/>`}function generateChordCSS(){const e=document.getElementById("ztn-dynamic-style");e&&e.remove();const t=document.createElement("style");t.id="ztn-dynamic-style",document.head.appendChild(t);const n=document.querySelectorAll("span.custom"),r=new Map,o=[];n.forEach((e=>{const t=Array.from(e.classList).find((e=>e.startsWith("ztn-")));if(!t)return;e.classList.add("loading");const n=t.replace("ztn-","").replace(/k/g,"#").replace(/T/g,"/").replace(/#/g,"kr3s"),a=`https://raw.githubusercontent.com/zidan52/ztnmusic/main/chord/${n}.png`,c=`https://raw.githubusercontent.com/zidan52/ztnmusic/main/chords/${n}.png`,s=new Promise((n=>{const o=new Image;o.onload=()=>{r.set(t,{selector:`.${t}`,backgroundURL:a}),e.classList.remove("loading"),n()},o.onerror=()=>{const o=new Image;o.onload=()=>{r.set(t,{selector:`.${t}`,backgroundURL:c}),e.classList.remove("loading"),n()},o.onerror=()=>{e.classList.remove("loading"),n()},o.src=c},o.src=a}));o.push(s)})),Promise.all(o).then((()=>{updateStyle(r,t)}))}function updateStyle(e,t){t.textContent="";let n="";e.forEach((({selector:e,backgroundURL:t})=>{n+=`\n      ${e} {\n        background: url('${t}') no-repeat white center/contain;\n      }\n    `})),t.appendChild(document.createTextNode(n))}function updateChordImagesFromText(){const e=document.getElementById("sizeable")?.textContent||"",t=new Set(e.match(/[A-G](?:#|b)?(?:maj7|m7|maj|min|dim|aug|sus|m|7)?(?:\/[A-G](?:#|b)?)?/g)||[]),n=document.getElementById("ztnchordimg");if(!n)return;let r="";const o=new Set;t.forEach((e=>{const t=e.replace(/#/g,"kr3s").replace(/\//g,"T");o.has(t)||(r+=createChordImage(e),o.add(t))})),n.innerHTML=r+'<div style="clear:both;"></div>'}window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("ztnarticlechord");if(!e)return;const t=e.textContent.trim();e.style.display="none";const n=document.createElement("div");n.id="loading-spinner",n.textContent="Loading chords...",e.parentNode.insertBefore(n,e),setTimeout((()=>{generateChordCodes(t,e),n.remove(),e.style.display="block"}),500)}));const keySequence=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],flatToSharpMap={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#"},chordRegex=/C#|D#|F#|G#|A#|Db|Eb|Gb|Ab|Bb|[A-G]/g;function transposeChord(e,t){const n=e.match(/([A-G][#b]?)(.*)/);if(!n)return e;let r=n[1];const o=n[2];r=flatToSharpMap[r]||r;let a=keySequence.indexOf(r);if(-1===a)return e;let c=(a+t)%keySequence.length;c<0&&(c+=keySequence.length);return keySequence[c]+o}$(document).ready((function(){const e=e=>{$(".ztnchord").each((function(){const t=$(this),n=t.attr("data-chord");if(!n)return;const r=transposeChord(n,"up"===e?1:-1);t.attr("data-chord",r);const o=r+t.text().replace(n,""),a="ztn-"+r.replace(/\//g,"T").replace(/#/g,"k");t.html(`${o}<span class="custom ${a}"></span>`)})),updateChordImagesFromText(),generateChordCSS()};$("#transposeUp").click((()=>e("up"))),$("#transposeDown").click((()=>e("down")))}));
var handle,speed=1,disp=0,currentspeed=0,status=1,currentpos=0,alt=1,curpos1=0,curpos2=-1,color=["","#ddd","#ccc","#bbb","#aaa","#999"],interval=[400,300,200,100,30];function scrollwindow(){if(1==status){const e=document.documentElement.scrollHeight-window.innerHeight;if((window.pageYOffset||document.documentElement.scrollTop)>=e-10)return void stopit();currentpos=document.all&&!document.getElementById?document.body.scrollTop+speed:window.pageYOffset+speed,window.scroll(0,currentpos)}}function startit(e){status=1,currentspeed=e,clearInterval(handle),speed=Math.max(1,Math.floor(e/2)),handle=setInterval("scrollwindow()",interval[e-1])}function stopit(){for(currentspeed=0,clearInterval(handle),status=0,i=1;i<=5;i++)document.getElementById("speed"+i).style.backgroundColor=color[i]}function resetBg(e){for(i=1;i<=5;i++)document.getElementById("speed"+i).style.backgroundColor=color[i];for(i=1;i<=currentspeed;i++)document.getElementById("speed"+i).style.backgroundColor="#00cc00"}function changeBg(e){for(i=1;i<=5;i++)document.getElementById("speed"+i).style.backgroundColor=color[i];for(i=1;i<=e;i++)document.getElementById("speed"+i).style.backgroundColor="#00cc00"}function tooglespeed(){0==disp?(disp=1,document.getElementById("ztn-autoscroll").style.display="",document.getElementById("speedtoogle").innerHTML='<svg viewBox="-8 -8 34 34"><path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z" fill="#222"/></svg>'):(disp=0,document.getElementById("ztn-autoscroll").style.display="none",document.getElementById("speedtoogle").innerHTML='<svg viewBox="-9 -9 42 42"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z" fill="#222"/></svg>')}function calcHeight(){var e=document.getElementById("ztn-autoscroll-by-ztncode").contentWindow.document.body.scrollHeight;document.getElementById("ztn-autoscroll-by-ztncode").height=e}
let originalStyles=[];function toggleChord(){let e=document.querySelectorAll(".ztnchord");e.forEach((e,l)=>{"none"===e.style.display?e.style.display=originalStyles[l]||"":e.style.display="none"})}window.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll(".ztnchord");e.forEach((e,l)=>{originalStyles[l]=e.style.display||""});let l=document.getElementById("btn-toggle-chord");l&&l.addEventListener("click",toggleChord)});
document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".breadcrumb span[itemprop='itemListElement'] span[itemprop='name']"),t=Array.from(e).map((function(e){return e.textContent.trim().toLowerCase()}));(t.includes("blog")||t.includes("article"))&&document.querySelectorAll(".serbaserbiztn").forEach((function(e){e.style.display="none"}))}));